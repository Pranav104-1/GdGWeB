<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password - Google Developer Group</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="auth-page">
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <span class="logo-icon">üîß</span>
                <span class="logo-text">GDG</span>
            </div>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><button id="darkModeBtn" class="dark-mode-btn" title="Toggle Dark Mode">üåô</button></li>
                <li><a href="login.html" class="nav-link auth-link">Login</a></li>
            </ul>
        </div>
    </nav>

    <div class="auth-container">
        <div class="auth-box">
            <div class="auth-close">
                <a href="index.html" class="close-btn">&times;</a>
            </div>
            
            <div class="auth-header">
                <div class="logo-icon">üîß</div>
                <h1>GDG</h1>
                <p>Reset Your Password</p>
            </div>

            <div class="forgot-password-content">
                <div class="forgot-step active" id="step1">
                    <h2>Recover Your Account</h2>
                    <p class="step-description">Enter the email address associated with your account and we'll send you instructions to reset your password.</p>
                    
                    <form id="emailForm" onsubmit="handleEmailSubmit(event)">
                        <div class="form-group">
                            <label for="recovery-email">Email Address</label>
                            <input type="email" id="recovery-email" name="email" required>
                            <span class="form-error" id="email-error"></span>
                        </div>
                        
                        <button type="submit" class="btn btn-primary auth-btn">Send Recovery Email</button>
                    </form>

                    <div class="forgot-divider">
                        <span>or</span>
                    </div>

                    <p class="recovery-help">
                        Don't have access to your email? 
                        <button type="button" class="btn-link" onclick="toggleStep(2)">Try another method</button>
                    </p>
                </div>

                <div class="forgot-step" id="step2">
                    <h2>Verify Your Identity</h2>
                    <p class="step-description">Answer the security question you set up during registration.</p>
                    
                    <form id="securityForm" onsubmit="handleSecuritySubmit(event)">
                        <div class="form-group">
                            <label for="security-question">Security Question</label>
                            <div class="security-question">
                                <strong>What is your favorite programming language?</strong>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="security-answer">Your Answer</label>
                            <input type="text" id="security-answer" name="answer" required>
                            <span class="form-error" id="answer-error"></span>
                        </div>
                        
                        <button type="submit" class="btn btn-primary auth-btn">Verify Answer</button>
                    </form>

                    <div class="forgot-divider">
                        <span>or</span>
                    </div>

                    <p class="recovery-help">
                        Want to use your email instead? 
                        <button type="button" class="btn-link" onclick="toggleStep(1)">Go back</button>
                    </p>
                </div>

                <div class="forgot-step" id="step3">
                    <h2>Reset Your Password</h2>
                    <p class="step-description">Enter your new password below. Make sure it's strong and secure.</p>
                    
                    <form id="resetForm" onsubmit="handlePasswordReset(event)">
                        <div class="form-group">
                            <label for="new-password">New Password</label>
                            <div class="password-input">
                                <input type="password" id="new-password" name="password" required>
                                <button type="button" class="toggle-password" onclick="togglePassword('new-password')">üëÅÔ∏è</button>
                            </div>
                            <span class="form-error" id="password-error"></span>
                            <div class="password-strength">
                                <div class="strength-meter" id="strengthMeter"></div>
                                <span class="strength-text" id="strengthText">Password strength</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="confirm-password">Confirm Password</label>
                            <div class="password-input">
                                <input type="password" id="confirm-password" name="confirm" required>
                                <button type="button" class="toggle-password" onclick="togglePassword('confirm-password')">üëÅÔ∏è</button>
                            </div>
                            <span class="form-error" id="confirm-error"></span>
                        </div>

                        <div class="password-requirements">
                            <h4>Password Requirements:</h4>
                            <ul>
                                <li><span class="req-icon" id="req-length">‚óã</span> At least 8 characters</li>
                                <li><span class="req-icon" id="req-uppercase">‚óã</span> One uppercase letter</li>
                                <li><span class="req-icon" id="req-lowercase">‚óã</span> One lowercase letter</li>
                                <li><span class="req-icon" id="req-number">‚óã</span> One number</li>
                                <li><span class="req-icon" id="req-special">‚óã</span> One special character</li>
                            </ul>
                        </div>
                        
                        <button type="submit" class="btn btn-primary auth-btn">Reset Password</button>
                    </form>
                </div>

                <div class="forgot-step" id="step4">
                    <div class="success-message">
                        <div class="success-icon">‚úì</div>
                        <h2>Password Reset Successful!</h2>
                        <p>Your password has been reset successfully. You can now login with your new password.</p>
                        <a href="login.html" class="btn btn-primary auth-btn">Back to Login</a>
                    </div>
                </div>
            </div>

            <div class="forgot-footer">
                <p>Remember your password? <a href="login.html">Back to login</a></p>
            </div>
        </div>

        <div class="auth-background">
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
            <div class="floating-shape shape-3"></div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        function toggleStep(stepNum) {
            const steps = document.querySelectorAll('.forgot-step');
            steps.forEach(step => step.classList.remove('active'));
            document.getElementById(`step${stepNum}`).classList.add('active');
        }

        function handleEmailSubmit(e) {
            e.preventDefault();
            // Simulate checking email
            setTimeout(() => {
                toggleStep(3);
            }, 1000);
        }

        function handleSecuritySubmit(e) {
            e.preventDefault();
            // Simulate verification
            setTimeout(() => {
                toggleStep(3);
            }, 1000);
        }

        function handlePasswordReset(e) {
            e.preventDefault();
            const newPass = document.getElementById('new-password').value;
            const confirmPass = document.getElementById('confirm-password').value;
            
            if (newPass !== confirmPass) {
                document.getElementById('confirm-error').textContent = 'Passwords do not match';
                return;
            }

            // Validate password strength
            if (!validatePassword(newPass)) {
                document.getElementById('password-error').textContent = 'Password does not meet requirements';
                return;
            }

            // Simulate password reset
            setTimeout(() => {
                toggleStep(4);
            }, 1000);
        }

        function validatePassword(password) {
            const hasLength = password.length >= 8;
            const hasUppercase = /[A-Z]/.test(password);
            const hasLowercase = /[a-z]/.test(password);
            const hasNumber = /[0-9]/.test(password);
            const hasSpecial = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password);

            updateRequirement('req-length', hasLength);
            updateRequirement('req-uppercase', hasUppercase);
            updateRequirement('req-lowercase', hasLowercase);
            updateRequirement('req-number', hasNumber);
            updateRequirement('req-special', hasSpecial);

            // Update strength meter
            updateStrengthMeter(password, [hasLength, hasUppercase, hasLowercase, hasNumber, hasSpecial]);

            return hasLength && hasUppercase && hasLowercase && hasNumber && hasSpecial;
        }

        function updateRequirement(id, met) {
            const elem = document.getElementById(id);
            if (met) {
                elem.textContent = '‚úì';
                elem.classList.add('met');
            } else {
                elem.textContent = '‚óã';
                elem.classList.remove('met');
            }
        }

        function updateStrengthMeter(password, requirements) {
            const meter = document.getElementById('strengthMeter');
            const text = document.getElementById('strengthText');
            const metCount = requirements.filter(r => r).length;
            const percentage = (metCount / 5) * 100;

            meter.style.width = percentage + '%';

            const strength = ['Very Weak', 'Weak', 'Fair', 'Good', 'Strong', 'Very Strong'];
            const colors = ['#ef4444', '#f59e0b', '#eab308', '#84cc16', '#22c55e', '#16a34a'];
            const index = Math.floor(percentage / 20);

            meter.style.background = colors[index];
            text.textContent = `Password strength: ${strength[index]}`;
            text.style.color = colors[index];
        }

        // Real-time password validation
        document.addEventListener('DOMContentLoaded', () => {
            const passwordInput = document.getElementById('new-password');
            if (passwordInput) {
                passwordInput.addEventListener('input', () => {
                    validatePassword(passwordInput.value);
                });
            }
        });
    </script>
</body>
</html>
